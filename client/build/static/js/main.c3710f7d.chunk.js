(window.webpackJsonpproject_chat_application=window.webpackJsonpproject_chat_application||[]).push([[0],[,,,function(e,t,a){e.exports=a.p+"static/media/logo.d642444b.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/volumeFull.52052744.svg"},function(e,t,a){e.exports=a.p+"static/media/volumeHalf.5437f749.svg"},function(e,t,a){e.exports=a.p+"static/media/mute.7c949b53.svg"},function(e,t,a){e.exports=a.p+"static/media/send-button.184677f0.svg"},function(e,t,a){e.exports=a.p+"static/media/playerJoin.22614250.mp3"},function(e,t,a){e.exports=a.p+"static/media/playerLeave.2ed3dd57.mp3"},function(e,t,a){e.exports=a.p+"static/media/correctGuess.abbd5947.mp3"},function(e,t,a){e.exports=a.p+"static/media/timerLow.7a00b8ca.mp3"},function(e,t,a){e.exports=a.p+"static/media/roundEnd.d9a7eee5.mp3"},function(e,t,a){e.exports=a.p+"static/media/roundStart.e6e97ef3.mp3"},function(e,t,a){e.exports=a.p+"static/media/error.25e3f2c4.svg"},function(e,t,a){e.exports=a(96)},,,,,,function(e,t){function a(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}a.keys=function(){return[]},a.resolve=a,e.exports=a,a.id=53},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t){},,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(32),s=a.n(c),o=a(15),l=a.n(o),m=a(33),u=a(8),i=a(34),d=a.n(i),f=a(3),p=a.n(f),v=a(35),E=a.n(v)()("https://charades1.herokuapp.com"),g=(a(83),a(1)),b=r.a.createContext();var y=function(){var e=Object(n.useContext)(b),t=Object(n.useCallback)(function(t){e.setName(t.target.value)},[]),a=Object(n.useCallback)(function(t){e.setRoom(t.target.value.trim().toUpperCase())},[]);return r.a.createElement("div",{className:"home-container"},r.a.createElement("div",{className:"logo-section"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:p.a,className:"logo-image"}),r.a.createElement("p",{className:"logo-subtext"},"face to face fun with the ones you love,",r.a.createElement("br",null),"minus the risk."))),r.a.createElement("div",{className:"login-section"},r.a.createElement("div",{className:"login-form"},r.a.createElement("h1",{className:"title"},"charades"),r.a.createElement("input",{className:"login-input",type:"text",placeholder:"nickname",maxLength:"15",onChange:t}),r.a.createElement("input",{className:"login-input",type:"text",placeholder:"game code",maxLength:"4",onChange:a}),r.a.createElement("div",{className:"login-buttons"},r.a.createElement("button",{className:"join-button",onClick:function(){e.name&&e.room&&E.emit("joinRoomQuery",{name:e.name,room:e.room},function(e){e&&alert(e)})}},"join game"),r.a.createElement("button",{className:"create-button",onClick:function(){e.name&&E.emit("createRoomQuery",{name:e.name},function(e){e&&alert(e)})}},"create a game"))),r.a.createElement("div",{className:"footer"},r.a.createElement("p",{className:"footer-creators"},"created by"," ",r.a.createElement("a",{href:"https://www.linkedin.com/in/dmercer10/",target:"_blank",className:"creator-name"},"duncan mercer"),","," ",r.a.createElement("a",{href:"https://www.linkedin.com/in/durongardezi/",target:"_blank",className:"creator-name"},"duron gardezi"),","," ",r.a.createElement("a",{href:"https://www.linkedin.com/in/griffin-bentley-72b391199/",target:"_blank",className:"creator-name"},"griffin bentley")))))},N=(a(84),a(36)),h=a.n(N),j=a(37),O=a.n(j),w=a(38),k=a.n(w),x=function(e){var t=e.player,a=e.muted,c=e.isActor,s=e.overlayContents,o=Object(n.useState)(t.volume),l=Object(g.a)(o,2),m=l[0],u=l[1],i=Object(n.useState)(.5),d=Object(g.a)(i,2),f=d[0],p=d[1],v=Object(n.useRef)();Object(n.useEffect)(function(){v.current&&(v.current.srcObject=t.stream)},[t.stream]),Object(n.useEffect)(function(){v.current&&(v.current.volume=m)},[m]);var E=Object(n.useCallback)(function(e){u(e.target.value),t.volume=e.target.value},[]),b=Object(n.useCallback)(function(e){0!==m?(p(m),u(0),t.volume=0,document.getElementById("volControl").value=0):(u(f),t.volume=f,document.getElementById("volControl").value=f)},[m]);return r.a.createElement("div",{className:"playerContainer"},r.a.createElement("div",{className:"videoArea"},c&&s?r.a.createElement("div",{className:"actor-overlay"},s):"",r.a.createElement("video",{ref:v,autoPlay:!0,muted:a,className:"playerVideo"}),a?"":r.a.createElement("div",{className:"volumeControls"},r.a.createElement("img",{className:"volumeButton",src:0===m?k.a:m<.5?O.a:h.a,onClick:b}),r.a.createElement("input",{className:"slider",id:"volControl",type:"range",min:"0",max:"1",value:m,step:"0.01",onChange:E}))),c?r.a.createElement("div",{className:"timer",id:"timer"}):"",c?r.a.createElement("div",{className:"mask",id:"mask"}):"")},C=(a(85),function(){var e=Object(n.useContext)(b),t=e.players.map(function(e){return r.a.createElement("div",{key:e.userId,className:"player"},r.a.createElement("div",{className:"player-camera"},r.a.createElement(x,{player:e,muted:null==e.call})),r.a.createElement("p",{className:"player-name"},e.username))});return r.a.createElement("div",{className:"lobby-container"},r.a.createElement("div",{className:"header"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:p.a,className:"header-logo"})),r.a.createElement("h1",{className:"header-gamecode"},e.room),r.a.createElement("div",{className:"dummy"})),r.a.createElement("div",{className:"player-grid"},t),r.a.createElement("div",{className:"start-game-section"},r.a.createElement("p",{className:"player-count"},e.players.length," / 6 players"),e.players.length>=1?r.a.createElement("button",{className:"start-button",onClick:function(){E.emit("startGameQuery",{room:e.room},function(e){e&&alert(e)})}},"start game"):r.a.createElement("button",{className:"start-button-disabled"},"not enough players")))}),S=(a(86),function(e){var t=e.message,a=t.user,n=t.text,c=e.name;return a===c?r.a.createElement("div",{className:"messageContainer justifyEnd"},r.a.createElement("p",{className:"sentText pr-10"},c),r.a.createElement("div",{className:"messageBox backgroundPink"},r.a.createElement("p",{className:"messageText"},n))):""===a?r.a.createElement("div",{className:"messageContainer justifyStart"},r.a.createElement("div",{className:"messageBox backgroundAqua"},r.a.createElement("p",{className:"messageText textBlack"},n))):r.a.createElement("div",{className:"messageContainer justifyStart"},r.a.createElement("div",{className:"messageBox backgroundGray"},r.a.createElement("p",{className:"messageText textBlack"},n)),r.a.createElement("p",{className:"sentText pl-10 "},a))}),P=(a(87),function(e){var t=e.messages,a=e.name,c=Object(n.useRef)(null);return Object(n.useEffect)(function(){c.current&&c.current.scrollIntoView({behavior:"smooth"})},[t]),r.a.createElement("div",{className:"messages"},t.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(S,{message:e,name:a}))}),r.a.createElement("div",{ref:c}))}),B=(a(88),function(e){var t=e.room;return r.a.createElement("div",{className:"infobar"},r.a.createElement("h3",{className:"infobar-roomcode"},t))}),I=a(39),M=a.n(I),A=(a(89),function(e){var t=e.setMessage,a=e.sendMessage,n=e.message;return r.a.createElement("form",{className:"chat-input"},r.a.createElement("input",{className:"text-input",type:"text",placeholder:"make a guess . . .",value:n,onChange:function(e){var a=e.target.value;return t(a)},onKeyPress:function(e){return"Enter"===e.key?a(e):null}}),r.a.createElement("img",{src:M.a,className:"send-button",onClick:function(e){return a(e)}}))}),R=(a(90),function(e){var t=e.room,a=e.name,c=Object(n.useState)(""),s=Object(g.a)(c,2),o=s[0],l=s[1],m=Object(n.useState)([]),i=Object(g.a)(m,2),d=i[0],f=i[1];Object(n.useEffect)(function(){E.on("message",function(e){f(function(t){return[].concat(Object(u.a)(t),[e])})})},[]);return r.a.createElement("div",{className:"chatbox"},r.a.createElement(B,{room:t}),r.a.createElement(P,{messages:d,name:a}),r.a.createElement(A,{message:o,setMessage:l,sendMessage:function(e){e.preventDefault(),o&&(E.emit("sendMessage",{message:o}),l(""))}}))}),_=(a(91),a(92),function(e){var t=e.message;return r.a.createElement("p",{className:"overlay-message"},t)}),T=function(e){var t=e.words,a=e.onWordChoice,n=t.map(function(e){return r.a.createElement("button",{key:e,className:"word-choice-button",onClick:function(){return a(e)}},r.a.createElement("p",null," ",e," "))});return r.a.createElement("div",{className:"word-choice-buttons"},n)},D=a(40),L=a.n(D),G=a(41),U=a.n(G),V=a(42),J=a.n(V),Q=a(43),W=a.n(Q),z=a(44),F=a.n(z),q=a(45),H=a.n(q),K=function(){var e=Object(n.useContext)(b),t=Object(n.useState)(e.name),a=Object(g.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)(""),l=Object(g.a)(o,2),m=l[0],u=l[1],i=Object(n.useState)([]),d=Object(g.a)(i,2),f=(d[0],d[1]),v=Object(n.useState)(60),y=Object(g.a)(v,2),N=y[0],h=y[1],j=Object(n.useState)(null),O=Object(g.a)(j,2),w=O[0],k=O[1],C=Object(n.useState)(null),S=Object(g.a)(C,2),P=S[0],B=S[1],I=Object(n.useState)(!1),M=Object(g.a)(I,2),A=M[0],D=M[1],G=Object(n.useState)(r.a.createElement(_,{message:"waiting for game to start"})),V=Object(g.a)(G,2),Q=V[0],z=V[1];Object(n.useEffect)(function(){var t=new Audio(J.a);t.volume=.2;var a=new Audio(L.a);a.volume=.2;var n=new Audio(U.a);n.volume=.2;var c=new Audio(W.a);c.volume=.2;var o=new Audio(H.a);o.volume=.2;var l=new Audio(F.a);l.volume=.2;E.on("userConnected",function(e,t){a.play()}),E.on("userDisconnected",function(e,t){n.play()}),E.on("actor",function(e){var t=e.actor;s(t),u(""),D(!1),z(r.a.createElement(_,{message:"".concat(t," is choosing a word")}))}),E.on("word",function(e){var t=e.word;o.play(),u(t),D(!1),z(null)}),E.on("wordChoices",function(e){f(e),z(r.a.createElement(T,{words:e,onWordChoice:K}))}),E.on("timer",function(e){var t=e.time;h(t),t>=0&&function(e){var t=document.getElementById("timer"),a=document.getElementById("mask");if(t&&a){t.style.WebkitTransition=1===e?"all 0s linear":"all 1s linear";var n=-(360-Math.floor(360*e));if(Math.abs(n)<180){var r=180;a.style.backgroundColor="var(--color-pink)"}else{r=0;a.style.backgroundColor="var(--color-white)"}t.style.transform="rotate("+n+"deg)",a.style.transform="rotate("+r+"deg)"}}(t/60),t<=9&&t>-1?c.play():-1===t&&l.play()}),E.on("guessed",function(a){t.play(),a===e.name&&D(!0)}),E.on("points",function(e){k(e)})},[]);var q=e.players.filter(function(e){return e.username!==c}).map(function(e){return r.a.createElement("div",{key:e.userId,className:"guesser"},r.a.createElement("div",{className:"guesser-camera"},r.a.createElement(x,{player:e,muted:null==e.call})),r.a.createElement("p",{className:"guesser-name"},e.username),r.a.createElement("p",{className:"guesser-pts"},null!==w?w[e.username]:0," pts"))});Object(n.useEffect)(function(){c===e.name?B(e.players.find(function(t){return t.username===e.name})):""!==c&&B(e.players.find(function(e){return e.username===c}))},[c,e.players]);var K=function(e){E.emit("wordChoice",e)};return r.a.createElement("div",{className:"game-container"},r.a.createElement("div",{className:"header"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:p.a,className:"header-logo"})),r.a.createElement("div",{className:"word"},function(){var t;return e.players.length>=2?t=c===e.name||-1===N||A?r.a.createElement("h1",null,m):r.a.createElement("h1",null,function(e){var t,a="";for(t=0;t<e.length;t++)a+=" "===e[t]?"\xa0\xa0":"_\xa0";return a.slice(0,-1)}(m)):(""!==m&&u(""),t=r.a.createElement("h1",null,"waiting for players")),t}()),r.a.createElement("div",{className:"dummy"})),r.a.createElement("div",{className:"game-components"},r.a.createElement("div",{className:"camera-section"},r.a.createElement("div",{className:"actor"},P?r.a.createElement("div",{className:"actor-camera"},r.a.createElement(x,{player:P,muted:!0,isActor:!0,overlayContents:Q})):"",r.a.createElement("p",{className:"guesser-name"},P?P.username:"")),r.a.createElement("div",{className:"guesser-camera-section"},q)),r.a.createElement(R,{room:e.room,name:e.name})))},X={host:"charades1.herokuapp.com",port:"9000",path:"video"},Y=function(){var e=Object(n.useContext)(b),t=function(t,a,n,r){e.setPlayers(function(e){return[].concat(Object(u.a)(e),[{userId:t,username:a,stream:n,call:r,volume:.5}])})},a=function(a,n,r){var c=e.myPeer.call(a,r,{metadata:{username:e.name}}),s=0;c.on("stream",function(e){s++%2===0&&t(a,n,e,c)})};return Object(n.useEffect)(function(){E.id&&e.setMyPeer(new d.a(E.id,X))},[E]),Object(n.useEffect)(function(){e.myPeer&&e.myPeer.on("error",function(e){console.log(e.type,e)})},[e.myPeer]),Object(n.useEffect)(function(){E.on("joinRoomResponse",function(t){var a=t.response,n=t.room,r=a.status,c=a.message;0===r?(e.setRoom(n),e.setState("lobby")):alert(c)}),E.on("startGameResponse",function(t){var a=t.response,n=a.status,r=a.message;0===n?e.setState("game"):alert(r)}),E.on("userDisconnected",function(t){var a=t.userId,n=e.players.find(function(e){return e.userId===a});n&&n.call.close(),e.setPlayers(function(e){return e.filter(function(e){return e.userId!==a})})})},[]),Object(n.useEffect)(function(){var n=function(){var n=Object(m.a)(l.a.mark(function n(r){return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.myPeer.on("call",function(e){var a=e.peer,n=e.metadata.username;e.answer(r);var c=0;e.on("stream",function(r){c++%2===0&&t(a,n,r,e)})});case 2:E.on("userConnected",function(e,t){a(e,t,r)});case 3:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}();"lobby"===e.state&&navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(function(a){t(E.id,e.name,a,null),n(a).then(function(){E.emit("userConnected",e.room)})})},[e.state]),"home"===e.state?r.a.createElement(y,null):"lobby"===e.state?r.a.createElement(C,null):r.a.createElement(K,null)},Z=(a(93),a(46)),$=a.n(Z),ee=function(){return r.a.createElement("div",{className:"mobile-landing-container"},r.a.createElement("img",{className:"error-icon",src:$.a}),r.a.createElement("p",{className:"message"},"Sorry, please join on a computer to play!"))},te=(a(94),a(16));s.a.render(r.a.createElement(function(e){var t=e.children,a=Object(n.useState)(""),c=Object(g.a)(a,2),s=c[0],o=c[1],l=Object(n.useState)(""),m=Object(g.a)(l,2),u=m[0],i=m[1],d=Object(n.useState)([]),f=Object(g.a)(d,2),p=f[0],v=f[1],E=Object(n.useState)("home"),y=Object(g.a)(E,2),N=y[0],h=y[1],j=Object(n.useState)(null),O=Object(g.a)(j,2),w={name:s,room:u,setName:o,setRoom:i,players:p,setPlayers:v,state:N,setState:h,myPeer:O[0],setMyPeer:O[1]};return r.a.createElement(b.Provider,{value:w},t)},null,r.a.createElement(te.BrowserView,null,r.a.createElement(Y,null)),r.a.createElement(te.MobileView,null,r.a.createElement(ee,null))),document.getElementById("root"))}],[[47,1,2]]]);
//# sourceMappingURL=main.c3710f7d.chunk.js.map