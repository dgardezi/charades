(window.webpackJsonpproject_chat_application=window.webpackJsonpproject_chat_application||[]).push([[0],[,,,function(e,a,t){e.exports=t.p+"static/media/logo.d642444b.svg"},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a,t){e.exports=t.p+"static/media/volumeFull.52052744.svg"},function(e,a,t){e.exports=t.p+"static/media/volumeHalf.5437f749.svg"},function(e,a,t){e.exports=t.p+"static/media/mute.7c949b53.svg"},function(e,a,t){e.exports=t.p+"static/media/send-button.184677f0.svg"},function(e,a,t){e.exports=t.p+"static/media/playerJoin.22614250.mp3"},function(e,a,t){e.exports=t.p+"static/media/playerLeave.2ed3dd57.mp3"},function(e,a,t){e.exports=t.p+"static/media/correctGuess.abbd5947.mp3"},function(e,a,t){e.exports=t.p+"static/media/timerLow.7a00b8ca.mp3"},function(e,a,t){e.exports=t.p+"static/media/roundEnd.d9a7eee5.mp3"},function(e,a,t){e.exports=t.p+"static/media/roundStart.e6e97ef3.mp3"},function(e,a,t){e.exports=t.p+"static/media/error.25e3f2c4.svg"},function(e,a,t){e.exports=t(96)},,,,,,function(e,a){function t(e){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}t.keys=function(){return[]},t.resolve=t,e.exports=t,t.id=53},,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,a){},,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(32),s=t.n(c),o=t(15),l=t.n(o),m=t(33),u=t(8),i=t(34),d=t.n(i),f=t(3),p=t.n(f),v=t(35),E=t.n(v)()("https://charades1.herokuapp.com"),g=(t(83),t(1)),b=r.a.createContext();var y=function(){var e=Object(n.useContext)(b),a=Object(n.useCallback)(function(a){e.setName(a.target.value)},[]),t=Object(n.useCallback)(function(a){e.setRoom(a.target.value.trim().toUpperCase())},[]);return r.a.createElement("div",{className:"home-container"},r.a.createElement("div",{className:"logo-section"},r.a.createElement("div",{className:"logo"},r.a.createElement("img",{src:p.a,className:"logo-image"}),r.a.createElement("p",{className:"logo-subtext"},"face to face fun with the ones you love,",r.a.createElement("br",null),"minus the risk."))),r.a.createElement("div",{className:"login-section"},r.a.createElement("div",{className:"login-form"},r.a.createElement("h1",{className:"title"},"charades"),r.a.createElement("input",{className:"login-input",type:"text",placeholder:"nickname",maxLength:"15",onChange:a}),r.a.createElement("input",{className:"login-input",type:"text",placeholder:"game code",maxLength:"4",onChange:t}),r.a.createElement("div",{className:"login-buttons"},r.a.createElement("button",{className:"join-button",onClick:function(){e.name&&e.room&&E.emit("joinRoomQuery",{name:e.name,room:e.room},function(e){e&&alert(e)})}},"join game"),r.a.createElement("button",{className:"create-button",onClick:function(){e.name&&E.emit("createRoomQuery",{name:e.name},function(e){e&&alert(e)})}},"create a game"))),r.a.createElement("div",{className:"footer"},r.a.createElement("p",{className:"footer-creators"},"created by"," ",r.a.createElement("a",{href:"https://www.linkedin.com/in/dmercer10/",target:"_blank",className:"creator-name"},"duncan mercer"),","," ",r.a.createElement("a",{href:"https://www.linkedin.com/in/durongardezi/",target:"_blank",className:"creator-name"},"duron gardezi"),","," ",r.a.createElement("a",{href:"https://www.linkedin.com/in/griffin-bentley-72b391199/",target:"_blank",className:"creator-name"},"griffin bentley")))))},N=(t(84),t(36)),h=t.n(N),j=t(37),O=t.n(j),w=t(38),k=t.n(w),x=function(e){var a=e.player,t=e.muted,c=e.isActor,s=e.overlayContents,o=Object(n.useState)(a.volume),l=Object(g.a)(o,2),m=l[0],u=l[1],i=Object(n.useState)(.5),d=Object(g.a)(i,2),f=d[0],p=d[1],v=Object(n.useRef)();Object(n.useEffect)(function(){v.current&&(v.current.srcObject=a.stream)},[a.stream]),Object(n.useEffect)(function(){v.current&&(v.current.volume=m)},[m]);var E=Object(n.useCallback)(function(e){u(e.target.value),a.volume=e.target.value},[]),b=Object(n.useCallback)(function(e){0!==m?(p(m),u(0),a.volume=0,document.getElementById("volControl").value=0):(u(f),a.volume=f,document.getElementById("volControl").value=f)},[m]);return r.a.createElement("div",{className:"playerContainer"},r.a.createElement("div",{className:"videoArea"},c&&s?r.a.createElement("div",{className:"actor-overlay"},s):"",r.a.createElement("video",{ref:v,autoPlay:!0,muted:t,className:"playerVideo"}),t?"":r.a.createElement("div",{className:"volumeControls"},r.a.createElement("img",{className:"volumeButton",src:0===m?k.a:m<.5?O.a:h.a,onClick:b}),r.a.createElement("input",{className:"slider",id:"volControl",type:"range",min:"0",max:"1",value:m,step:"0.01",onChange:E}))),c?r.a.createElement("div",{className:"timer",id:"timer"}):"",c?r.a.createElement("div",{className:"mask",id:"mask"}):"")},C=(t(85),function(){var e=Object(n.useContext)(b),a=e.players.map(function(e){return r.a.createElement("div",{key:e.userId,className:"player"},r.a.createElement("div",{className:"player-camera"},r.a.createElement(x,{player:e,muted:null==e.call})),r.a.createElement("p",{className:"player-name"},e.username))});return r.a.createElement("div",{className:"lobby-container"},r.a.createElement("div",{className:"header"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:p.a,className:"header-logo"})),r.a.createElement("h1",{className:"header-gamecode"},e.room),r.a.createElement("div",{className:"dummy"})),r.a.createElement("div",{className:"player-grid"},a),r.a.createElement("div",{className:"start-game-section"},r.a.createElement("p",{className:"player-count"},e.players.length," / 6 players"),e.players.length>=1?r.a.createElement("button",{className:"start-button",onClick:function(){E.emit("startGameQuery",{room:e.room},function(e){e&&alert(e)})}},"start game"):r.a.createElement("button",{className:"start-button-disabled"},"not enough players")))}),S=(t(86),function(e){var a=e.message,t=a.user,n=a.text,c=e.name;return t===c?r.a.createElement("div",{className:"messageContainer justifyEnd"},r.a.createElement("p",{className:"sentText pr-10"},c),r.a.createElement("div",{className:"messageBox backgroundPink"},r.a.createElement("p",{className:"messageText"},n))):""===t?r.a.createElement("div",{className:"messageContainer justifyStart"},r.a.createElement("div",{className:"messageBox backgroundAqua"},r.a.createElement("p",{className:"messageText textBlack"},n))):r.a.createElement("div",{className:"messageContainer justifyStart"},r.a.createElement("div",{className:"messageBox backgroundGray"},r.a.createElement("p",{className:"messageText textBlack"},n)),r.a.createElement("p",{className:"sentText pl-10 "},t))}),P=(t(87),function(e){var a=e.messages,t=e.name,c=Object(n.useRef)(null);return Object(n.useEffect)(function(){c.current&&c.current.scrollIntoView({behavior:"smooth"})},[a]),r.a.createElement("div",{className:"messages"},a.map(function(e,a){return r.a.createElement("div",{key:a},r.a.createElement(S,{message:e,name:t}))}),r.a.createElement("div",{ref:c}))}),B=(t(88),function(e){var a=e.room;return r.a.createElement("div",{className:"infobar"},r.a.createElement("h3",{className:"infobar-roomcode"},a))}),I=t(39),M=t.n(I),A=(t(89),function(e){var a=e.setMessage,t=e.sendMessage,n=e.message;return r.a.createElement("form",{className:"chat-input"},r.a.createElement("input",{className:"text-input",type:"text",placeholder:"make a guess . . .",value:n,onChange:function(e){var t=e.target.value;return a(t)},onKeyPress:function(e){return"Enter"===e.key?t(e):null}}),r.a.createElement("img",{src:M.a,className:"send-button",onClick:function(e){return t(e)}}))}),R=(t(90),function(e){var a=e.room,t=e.name,c=Object(n.useState)(""),s=Object(g.a)(c,2),o=s[0],l=s[1],m=Object(n.useState)([]),i=Object(g.a)(m,2),d=i[0],f=i[1];Object(n.useEffect)(function(){E.on("message",function(e){f(function(a){return[].concat(Object(u.a)(a),[e])})})},[]);return r.a.createElement("div",{className:"chatbox"},r.a.createElement(B,{room:a}),r.a.createElement(P,{messages:d,name:t}),r.a.createElement(A,{message:o,setMessage:l,sendMessage:function(e){e.preventDefault(),o&&(E.emit("sendMessage",{message:o}),l(""))}}))}),_=(t(91),t(92),function(e){var a=e.message;return r.a.createElement("p",{className:"overlay-message"},a)}),T=function(e){var a=e.words,t=e.onWordChoice,n=a.map(function(e){return r.a.createElement("button",{key:e,className:"word-choice-button",onClick:function(){return t(e)}},r.a.createElement("p",null," ",e," "))});return r.a.createElement("div",{className:"word-choice-buttons"},n)},D=t(40),L=t.n(D),G=t(41),U=t.n(G),V=t(42),J=t.n(V),Q=t(43),W=t.n(Q),z=t(44),F=t.n(z),q=t(45),H=t.n(q),K=function(){var e=Object(n.useContext)(b),a=Object(n.useState)(e.name),t=Object(g.a)(a,2),c=t[0],s=t[1],o=Object(n.useState)(""),l=Object(g.a)(o,2),m=l[0],u=l[1],i=Object(n.useState)([]),d=Object(g.a)(i,2),f=(d[0],d[1]),v=Object(n.useState)(60),y=Object(g.a)(v,2),N=y[0],h=y[1],j=Object(n.useState)(null),O=Object(g.a)(j,2),w=O[0],k=O[1],C=Object(n.useState)(null),S=Object(g.a)(C,2),P=S[0],B=S[1],I=Object(n.useState)(!1),M=Object(g.a)(I,2),A=M[0],D=M[1],G=Object(n.useState)(r.a.createElement(_,{message:"waiting for game to start"})),V=Object(g.a)(G,2),Q=V[0],z=V[1];Object(n.useEffect)(function(){var a=new Audio(J.a);a.volume=.2;var t=new Audio(L.a);t.volume=.2;var n=new Audio(U.a);n.volume=.2;var c=new Audio(W.a);c.volume=.2;var o=new Audio(H.a);o.volume=.2;var l=new Audio(F.a);l.volume=.2;E.on("userConnected",function(e,a){t.play()}),E.on("userDisconnected",function(e,a){n.play()}),E.on("actor",function(e){var a=e.actor;s(a),u(""),D(!1),z(r.a.createElement(_,{message:"".concat(a," is choosing a word")}))}),E.on("word",function(e){var a=e.word;o.play(),u(a),D(!1),z(null)}),E.on("wordChoices",function(e){f(e),z(r.a.createElement(T,{words:e,onWordChoice:K}))}),E.on("timer",function(e){var a=e.time;h(a),a>=0&&function(e){var a=document.getElementById("timer"),t=document.getElementById("mask");if(a&&t){a.style.WebkitTransition=1===e?"all 0s linear":"all 1s linear";var n=-(360-Math.floor(360*e));if(Math.abs(n)<180){var r=180;t.style.backgroundColor="var(--color-pink)"}else{r=0;t.style.backgroundColor="var(--color-white)"}a.style.transform="rotate("+n+"deg)",t.style.transform="rotate("+r+"deg)"}}(a/60),a<=9&&a>-1?c.play():-1===a&&l.play()}),E.on("guessed",function(t){a.play(),t===e.name&&D(!0)}),E.on("points",function(e){k(e)})},[]);var q=e.players.filter(function(e){return e.username!==c}).map(function(e){return r.a.createElement("div",{key:e.userId,className:"guesser"},r.a.createElement("div",{className:"guesser-camera"},r.a.createElement(x,{player:e,muted:null==e.call})),r.a.createElement("p",{className:"guesser-name"},e.username),r.a.createElement("p",{className:"guesser-pts"},null!==w?w[e.username]:0," pts"))});Object(n.useEffect)(function(){c===e.name?B(e.players.find(function(a){return a.username===e.name})):""!==c&&B(e.players.find(function(e){return e.username===c}))},[c,e.players]);var K=function(e){E.emit("wordChoice",e)};return r.a.createElement("div",{className:"game-container"},r.a.createElement("div",{className:"header"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:p.a,className:"header-logo"})),r.a.createElement("div",{className:"word"},function(){var a;return e.players.length>=2?a=c===e.name||-1===N||A?r.a.createElement("h1",null,m):r.a.createElement("h1",null,function(e){var a,t="";for(a=0;a<e.length;a++)t+=" "===e[a]?"\xa0\xa0":"_\xa0";return t.slice(0,-1)}(m)):(""!==m&&u(""),a=r.a.createElement("h1",null,"waiting for players")),a}()),r.a.createElement("div",{className:"dummy"})),r.a.createElement("div",{className:"game-components"},r.a.createElement("div",{className:"camera-section"},r.a.createElement("div",{className:"actor"},P?r.a.createElement("div",{className:"actor-camera"},r.a.createElement(x,{player:P,muted:!0,isActor:!0,overlayContents:Q})):"",r.a.createElement("p",{className:"guesser-name"},P?P.username:"")),r.a.createElement("div",{className:"guesser-camera-section"},q)),r.a.createElement(R,{room:e.room,name:e.name})))},X={secure:!0,host:"charades-peerjs.herokuapp.com",debug:3},Y=function(){var e=Object(n.useContext)(b);E.on("connect",function(){console.log(E.id),e.setMyPeer(new d.a(E.id,X))});var a=function(a,t,n,r){e.setPlayers(function(e){return[].concat(Object(u.a)(e),[{userId:a,username:t,stream:n,call:r,volume:.5}])})},t=function(t,n,r){var c=e.myPeer.call(t,r,{metadata:{username:e.name}}),s=0;c.on("stream",function(e){s++%2===0&&a(t,n,e,c)})};return Object(n.useEffect)(function(){e.myPeer&&e.myPeer.on("error",function(e){console.log(e.type,e)})},[e.myPeer]),Object(n.useEffect)(function(){E.on("joinRoomResponse",function(a){var t=a.response,n=a.room,r=t.status,c=t.message;0===r?(e.setRoom(n),e.setState("lobby")):alert(c)}),E.on("startGameResponse",function(a){var t=a.response,n=t.status,r=t.message;0===n?e.setState("game"):alert(r)}),E.on("userDisconnected",function(a){var t=a.userId,n=e.players.find(function(e){return e.userId===t});n&&n.call.close(),e.setPlayers(function(e){return e.filter(function(e){return e.userId!==t})})})},[]),Object(n.useEffect)(function(){var n=function(){var n=Object(m.a)(l.a.mark(function n(r){return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.myPeer.on("call",function(e){var t=e.peer,n=e.metadata.username;e.answer(r);var c=0;e.on("stream",function(r){c++%2===0&&a(t,n,r,e)})});case 2:E.on("userConnected",function(e,a){t(e,a,r)});case 3:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}();"lobby"===e.state&&navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then(function(t){a(E.id,e.name,t,null),n(t).then(function(){E.emit("userConnected",e.room)})})},[e.state]),"home"===e.state?r.a.createElement(y,null):"lobby"===e.state?r.a.createElement(C,null):r.a.createElement(K,null)},Z=(t(93),t(46)),$=t.n(Z),ee=function(){return r.a.createElement("div",{className:"mobile-landing-container"},r.a.createElement("img",{className:"error-icon",src:$.a}),r.a.createElement("p",{className:"message"},"Sorry, please join on a computer to play!"))},ae=(t(94),t(16));s.a.render(r.a.createElement(function(e){var a=e.children,t=Object(n.useState)(""),c=Object(g.a)(t,2),s=c[0],o=c[1],l=Object(n.useState)(""),m=Object(g.a)(l,2),u=m[0],i=m[1],d=Object(n.useState)([]),f=Object(g.a)(d,2),p=f[0],v=f[1],E=Object(n.useState)("home"),y=Object(g.a)(E,2),N=y[0],h=y[1],j=Object(n.useState)(null),O=Object(g.a)(j,2),w={name:s,room:u,setName:o,setRoom:i,players:p,setPlayers:v,state:N,setState:h,myPeer:O[0],setMyPeer:O[1]};return r.a.createElement(b.Provider,{value:w},a)},null,r.a.createElement(ae.BrowserView,null,r.a.createElement(Y,null)),r.a.createElement(ae.MobileView,null,r.a.createElement(ee,null))),document.getElementById("root"))}],[[47,1,2]]]);
//# sourceMappingURL=main.e0054a40.chunk.js.map